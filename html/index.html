<!DOCTYPE html>
<html>
  <head>
    <title>Example Ui Element</title>

    <meta charset="utf-8" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style type="text/css">
      body {
        margin: 0;
        padding: 0;
        font-family: -apple-system, system-ui, BlinkMacSystemFont, 'Segoe UI', 'Open Sans', 'Helvetica Neue', Helvetica, Arial, sans-serif;
      }
      .container {
        background-color: #fdfdff77;
        border-radius: 20px;
      }
      div {
        width: 600px;
        margin: 5em auto;
        padding: 2em;
      }
      @media (max-width: 700px) {
        div {
          margin: 0 auto;
          width: auto;
        }
      }
    </style>
  </head>

  <script language="JavaScript">
    function wuiSendEvent(event, payload) {
      return new Promise(function (resolve, reject) {
        window.WuiQuery({
          request: JSON.stringify({ wuiEventName: event, wuiEventPayload: payload }),
          onSuccess: function (response) {
            resolve(response);
          },
          onFailure: function (error_code, error_message) {
            reject(error_code, error_message);
          },
        });
      });
    }

    // Send a query to the browser process.
    function sendQueryMessage() {
      // Results in a call to the OnQuery method in client_impl.cc.

      wuiSendEvent('TestEvent', { test: 'test' })
        .then((res) => {
          console.log(res);
        })
        .catch((err) => {
          console.log(err);
        });
    }

    function incrementValue() {
      var value = parseInt(document.getElementById('manual').value, 10);
      value = isNaN(value) ? 0 : value;
      value++;
      document.getElementById('manual').value = value;
    }

    setInterval(function () {
      var value = parseInt(document.getElementById('auto').value, 10);
      value = isNaN(value) ? 0 : value;
      value++;
      document.getElementById('auto').value = value;
    }, 1000);
  </script>

  <body>
    <div class="container">
      <h1>Example Head Element</h1>
      <button onclick="sendQueryMessage()">testEvent</button>

      <p>Autom incremental value on the left, on the right a manually incremented field</p>

      <input type="text" id="auto" value="0" />
      <input type="text" id="manual" value="0" />

      <input type="button" onclick="incrementValue()" value="Increment Value" />

      <div style="display: flex; justify-content: flex-start">
        <!--- Write all 3 colors -->
        <div style="background: linear-gradient(to bottom, #ff0000ff, #ff0000ff); width: 20px; height: 20px">red</div>
        <div style="background: linear-gradient(to bottom, #00ff00ff, #00ff00ff); width: 20px; height: 20px">green</div>
        <div style="background: linear-gradient(to bottom, #0000ffff, #0000ffff); width: 20px; height: 20px">blue</div>
      </div>
    </div>
  </body>
</html>
